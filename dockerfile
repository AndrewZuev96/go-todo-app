# 1. Берем готовый образ с Linux и установленным Go
FROM golang:1.25

# 2. Создаем папку внутри контейнера
WORKDIR /app

# 3. Копируем файлы зависимостей
COPY go.mod go.sum ./
# Скачиваем библиотеки
RUN go mod download

# 4. Копируем весь остальной код
COPY . .

# 5. Собираем бинарный файл (компилируем)
RUN go build -o main .

# 6. Говорим, какую команду запустить при старте контейнера
CMD ["./main"]